\section{Compare original queries and reduced queries}

This section examines the differences in network request size and network response size between the reduced GraphQL queries and the unmodified original queries. The original queries are executed, and the network data is collected. The reduced queries are executed, and the network data is collected. The difference between the original and reduced queries is calculated in percentages and bytes. Table \ref{table:code:comparison-user-reduction} shows the difference in network size for the user-detail query between the original and reduced queries. The query fetches a user by its unique id. The network data was collected by fetching 10 different users from the GraphQL \ac{API}. The requested fields of the user-detail query and which fields are removed fields are explained in more detail in Section \ref{subsection:background:graphql:example-reduction}. The original query contains 16 fields, and 8 fields are removed from the query with the query reduction mechanism. By removing 8 fields from the original GraphQL query, the request size to the GraphQL \ac{API} was reduced by about 30\% or 161 bytes. The request size savings from query reduction is always the same for the requests because the same fields are fetched in every query. When fetching 10 distinct users, a total of 1.61 KB of request size can be saved. The response size was reduced by 42\% on average. About 2.55 KB response size is saved if 10 distinct users are fetched from the GraphQL \ac{API} with the help of query reduction. The response size difference varies slightly from user to user, because the content of the fields is different. The difference from the smallest to the largest user is only about 2\%.

\ifshowTables
\begin{table}[!htbp]
  \begin{tabular}{|l|l|l|l|l|}
  \hline
  \textbf{Query} & \textbf{Req. diff (\%)} & \textbf{Req. size diff (B)} & \textbf{Resp. diff (\%)} & \textbf{Resp. size diff (B)} \\
  \hline
  User A & 30\% & 161 & 42\% & 257 \\
  \hline
  User B & 30\% & 161 & 42\% & 257 \\
  \hline
  User C & 30\% & 161 & 41\% & 257 \\
  \hline
  User D & 30\% & 161 & 42\% & 244 \\
  \hline
  User E & 30\% & 161 & 43\% & 251 \\
  \hline
  User F & 30\% & 161 & 42\% & 271 \\
  \hline
  User G & 30\% & 161 & 42\% & 249 \\
  \hline
  User H & 30\% & 161 & 41\% & 263 \\
  \hline
  User I & 30\% & 161 & 41\% & 248 \\
  \hline
  User J & 30\% & 161 & 41\% & 252 \\
  \hline
  \hline
  \textbf{AVG} & \textbf{30\%} & - & \textbf{42\%} & -  \\
  \hline
  \hline
  \textbf{SUM} & - & \textbf{1610 (1.61 KB)} & - & \textbf{2549 (2.55 KB)} \\
  \hline
  \multicolumn{5}{l}{16 fields requested, 8 fields Removed, 8 remaining sent to the GraphQL \ac{API}}
  \end{tabular}
  \caption{A comparison of the user-detail query in request- and response-sizes.}\label{table:code:comparison-user-reduction}
\end{table}
\fi

% \bigskip

\noindent Table \ref{table:code:comparison-contract-reduction} shows the difference in network size for the contract-detail query between the original and reduced queries. The query fetches the data to display a contract with its unique id. The data was collected by fetching 10 different contracts. The original query contains 17 fields, where 10 fields were removed from the query with the query reduction mechanism. Therefore, only 7 of the 17 fields remain inside the query, which means that 58\% of the fields were removed. The size of the requests to the GraphQL \ac{API} can be reduced by an average of 38\% or 207 bytes. Using the application and querying 10 detail views of a contract 2.07 KB of request size can be saved. The response size from the GraphQL \ac{API} can be reduced by about 58\% or 3.96 KB when fetching 10 different contracts. The response size savings vary slightly from contract to contract because the content of the fields is different. The difference from the smallest to the largest contract is only about 3\%.

\ifshowTables
\begin{table}[!htbp]
  \begin{tabular}{|l|l|l|l|l|}
  \hline
  \textbf{Query} & \textbf{Req. diff (\%)}  & \textbf{Req. size diff (B)} & \textbf{Resp. diff (\%)} & \textbf{Resp. size diff (B)}  \\
  \hline
  Contract A & 38\% & 207 & 58\% & 394 \\
  \hline
  Contract B & 38\% & 207 & 58\% & 378 \\
  \hline
  Contract C & 38\% & 207 & 59\% & 403 \\
  \hline
  Contract D & 38\% & 207 & 60\% & 408 \\
  \hline
  Contract E & 38\% & 207 & 60\% & 409 \\
  \hline
  Contract F & 38\% & 207 & 57\% & 370 \\
  \hline
  Contract G & 38\% & 207 & 58\% & 393 \\
  \hline
  Contract H & 38\% & 207 & 58\% & 407 \\
  \hline
  Contract I  & 38\% & 207 & 59\% & 400 \\
  \hline
  Contract J & 38\% & 207 & 58\% & 389 \\
  \hline
  \hline
  \textbf{AVG} & \textbf{38\%} & - & \textbf{58\%} & - \\
  \hline
  \hline
  \textbf{SUM} & - & \textbf{2070 (2.07 KB)} & - & \textbf{3951 (3.95 KB)} \\
  \hline
  \multicolumn{5}{l}{17 fields requested, 10 fields removed, 7 remaining sent to the GraphQL \ac{API}}
  \end{tabular}
  \caption{A comparison of the contract-detail query in request- and response-sizes.}\label{table:code:comparison-contract-reduction}
\end{table}
\fi